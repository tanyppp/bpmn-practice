[{"/Users/mrtan/Desktop/bpmnjs-practice/src/index.jsx":"1","/Users/mrtan/Desktop/bpmnjs-practice/src/App.jsx":"2","/Users/mrtan/Desktop/bpmnjs-practice/src/pages/1.basic/index.jsx":"3","/Users/mrtan/Desktop/bpmnjs-practice/src/utils/index.js":"4","/Users/mrtan/Desktop/bpmnjs-practice/src/mock/simple.js":"5","/Users/mrtan/Desktop/bpmnjs-practice/src/pages/2.http-use/index.jsx":"6"},{"size":532,"mtime":1610809002271,"results":"7","hashOfConfig":"8"},{"size":672,"mtime":1610810685458,"results":"9","hashOfConfig":"8"},{"size":1300,"mtime":1610811998424,"results":"10","hashOfConfig":"8"},{"size":487,"mtime":1610813739008,"results":"11","hashOfConfig":"8"},{"size":1553,"mtime":1610807013853,"results":"12","hashOfConfig":"8"},{"size":2089,"mtime":1610813921786,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"1xs47i7",{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"19","messages":"20","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"25","messages":"26","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27"},"/Users/mrtan/Desktop/bpmnjs-practice/src/index.jsx",[],["28","29"],"/Users/mrtan/Desktop/bpmnjs-practice/src/App.jsx",[],"/Users/mrtan/Desktop/bpmnjs-practice/src/pages/1.basic/index.jsx",[],"/Users/mrtan/Desktop/bpmnjs-practice/src/utils/index.js",[],"/Users/mrtan/Desktop/bpmnjs-practice/src/mock/simple.js",[],"/Users/mrtan/Desktop/bpmnjs-practice/src/pages/2.http-use/index.jsx",["30"],"import React, { useState, useEffect } from \"react\";\n// 引入相关的依赖\nimport BpmnModeler from \"bpmn-js/lib/Modeler\";\n// import camundaModdleDescriptor from \"camunda-bpmn-moddle/resources/camunda\";\nimport { xmlStr } from \"@/mock/simple\";\nimport { logWarnings, downloadWithHref } from \"@/utils\";\n\nlet m = {};\n\nconst downloadOptionsMap = {\n  svg: {\n    data: \"\",\n    name: \"bpmn-demo.svg\",\n  },\n  xml: {\n    data: \"\",\n    name: \"bpmn-demo.xml\",\n  },\n};\n\nfunction HttpUse() {\n  const [isLoading, setIsLoading] = useState(false);\n\n  // 模拟请求\n  async function getData() {\n    setIsLoading(true);\n    await new Promise((resolve) => {\n      setTimeout(resolve, 1000);\n    });\n    setIsLoading(false);\n\n    return xmlStr;\n  }\n\n  async function init() {\n    const xmlData = await getData();\n    m = new BpmnModeler({\n      container: \".bpmn-canvas\",\n      // moddleExtensions: {\n      //   camunda: camundaModdleDescriptor,\n      // },\n    });\n    console.log(m);\n    const res = await m.importXML(xmlData);\n    logWarnings(res);\n    saveSvg();\n    saveXml();\n    m.on(\"commandStack.changed\", () => {\n      saveSvg();\n      saveXml();\n    });\n  }\n\n  async function saveSvg() {\n    const data = await m.saveSVG();\n    downloadOptionsMap.svg.data = data.svg;\n  }\n\n  async function saveXml() {\n    const data = await m.saveXML({ format: true });\n    downloadOptionsMap.xml.data = data.xml;\n  }\n\n  function onSaveSvg() {\n    const { data, name } = downloadOptionsMap.svg;\n\n    downloadWithHref({\n      data,\n      name,\n    });\n  }\n\n  function onSaveXml() {\n    const { data, name } = downloadOptionsMap.xml;\n\n    downloadWithHref({\n      data,\n      name,\n    });\n  }\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  return (\n    <div className=\"bpmn-container\">\n      <div className=\"bpmn-canvas http-use\">{isLoading && \"loading...\"}</div>\n      {!isLoading && (\n        <div className=\"btn-container\">\n          <button onClick={onSaveSvg}>保存为svg</button>\n          <button onClick={onSaveXml}>保存为xml</button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default HttpUse;\n",{"ruleId":"31","replacedBy":"32"},{"ruleId":"33","replacedBy":"34"},{"ruleId":"35","severity":1,"message":"36","line":84,"column":6,"nodeType":"37","endLine":84,"endColumn":8,"suggestions":"38"},"no-native-reassign",["39"],"no-negated-in-lhs",["40"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'init'. Either include it or remove the dependency array.","ArrayExpression",["41"],"no-global-assign","no-unsafe-negation",{"desc":"42","fix":"43"},"Update the dependencies array to be: [init]",{"range":"44","text":"45"},[1683,1685],"[init]"]